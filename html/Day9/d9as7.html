<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Fancy Calculator</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap');

  body {
    font-family: 'Roboto Mono', monospace;
    background: linear-gradient(135deg, #667eea, #764ba2);
    height: 100vh;
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .calculator {
    background: #1f1f38;
    border-radius: 16px;
    box-shadow: 0 12px 40px rgba(118, 75, 162, 0.6);
    padding: 30px 25px;
    width: 320px;
  }

  #display {
    width: 100%;
    height: 50px;
    border-radius: 12px;
    border: none;
    font-size: 28px;
    padding: 10px 20px;
    box-sizing: border-box;
    text-align: right;
    background: #2c2c54;
    color: #eee;
    box-shadow: inset 2px 2px 8px #1a1a33, inset -2px -2px 8px #3b3b6b;
    user-select: none;
  }

  #display:disabled {
    color: #eee;
  }

  .buttons {
    margin-top: 20px;
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 15px;
  }

  button {
    padding: 18px 0;
    font-size: 22px;
    border: none;
    border-radius: 12px;
    background: linear-gradient(145deg, #29295a, #1c1c37);
    color: #ddd;
    cursor: pointer;
    box-shadow:  6px 6px 12px #191931,
                 -6px -6px 12px #313167;
    transition: all 0.3s ease;
    user-select: none;
    position: relative;
    overflow: hidden;
  }

  /* Hover glow effect */
  button:hover {
    background: linear-gradient(145deg, #3a3a75, #282864);
    box-shadow:  0 0 15px #7c6ee0,
                 inset 0 0 8px #a39ff4;
    color: #fff;
  }

  /* Button press effect */
  button:active {
    box-shadow: inset 4px 4px 8px #1a1a33,
                inset -4px -4px 8px #3b3b6b;
    transform: translateY(2px);
    color: #c1baff;
  }

  /* Operators */
  button.operator {
    background: linear-gradient(145deg, #f3a821, #d88500);
    color: #fff;
    box-shadow: 6px 6px 12px #a66c00, -6px -6px 12px #f3b733;
  }

  button.operator:hover {
    background: linear-gradient(145deg, #f6c248, #da9e00);
    box-shadow: 0 0 15px #f8d86c, inset 0 0 10px #ffe26e;
  }

  button.operator:active {
    box-shadow: inset 4px 4px 8px #b27200, inset -4px -4px 8px #f3b733;
  }

  /* Clear button */
  button.clear {
    background: linear-gradient(145deg, #eb5353, #b32c2c);
    color: #fff;
    box-shadow: 6px 6px 12px #7f1a1a, -6px -6px 12px #e96161;
  }

  button.clear:hover {
    background: linear-gradient(145deg, #f66b6b, #cb3a3a);
    box-shadow: 0 0 20px #ff8080, inset 0 0 12px #ff9797;
  }

  button.clear:active {
    box-shadow: inset 4px 4px 8px #9b1f1f, inset -4px -4px 8px #e96161;
  }

  /* Equals button */
  #equals {
    background: linear-gradient(145deg, #43a047, #2e7d32);
    color: #fff;
    box-shadow: 6px 6px 12px #226622, -6px -6px 12px #54b254;
    grid-row: 4 / 5;
  }

  #equals:hover {
    background: linear-gradient(145deg, #4caf50, #388e3c);
    box-shadow: 0 0 20px #76d275, inset 0 0 12px #a6e6a6;
  }

  #equals:active {
    box-shadow: inset 4px 4px 8px #2b662b, inset -4px -4px 8px #54b254;
  }

  /* Zero button wide */
  .num.zero {
    grid-column: span 2;
  }
</style>
</head>
<body>

<div class="calculator">
  <input type="text" id="display" disabled />

  <div class="buttons">
    <button class="clear" id="clear">C</button>
    <button class="operator" data-op="/">&#247;</button>
    <button class="operator" data-op="*">&times;</button>
    <button class="operator" data-op="-">âˆ’</button>

    <button class="num">7</button>
    <button class="num">8</button>
    <button class="num">9</button>
    <button class="operator" data-op="+">+</button>

    <button class="num">4</button>
    <button class="num">5</button>
    <button class="num">6</button>
    <button id="equals">=</button>

    <button class="num">1</button>
    <button class="num">2</button>
    <button class="num">3</button>
    <button class="num zero">0</button>
    <button class="num">.</button>
  </div>
</div>

<!-- jQuery CDN -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
  $(document).ready(function() {
    let expression = "";

    function updateDisplay() {
      $('#display').val(expression);
    }

    $('.num').click(function() {
      let val = $(this).text();

      // Prevent multiple dots in the current number segment
      if (val === '.') {
        let parts = expression.split(/[\+\-\*\/]/);
        let currentNumber = parts[parts.length - 1];
        if (currentNumber.includes('.')) {
          return;
        }
      }

      expression += val;
      updateDisplay();
    });

    $('.operator').click(function() {
      let op = $(this).data('op');

      if (expression === "") {
        // Allow '-' for negative number start
        if (op === '-') {
          expression = '-';
          updateDisplay();
        }
        return;
      }

      let lastChar = expression.slice(-1);
      if (['+', '-', '*', '/'].includes(lastChar)) {
        // Replace last operator if two operators clicked consecutively
        expression = expression.slice(0, -1) + op;
      } else {
        expression += op;
      }
      updateDisplay();
    });

    $('#clear').click(function() {
      expression = "";
      updateDisplay();
    });

    $('#equals').click(function() {
      if (expression === "") return;

      let lastChar = expression.slice(-1);
      if (['+', '-', '*', '/'].includes(lastChar)) {
        expression = expression.slice(0, -1);
      }

      try {
        let result = eval(expression);
        if (typeof result === "number") {
          result = parseFloat(result.toFixed(6));
        }
        expression = result.toString();
        updateDisplay();
      } catch (e) {
        expression = "";
        $('#display').val('Error');
      }
    });
  });
</script>

</body>
</html>
